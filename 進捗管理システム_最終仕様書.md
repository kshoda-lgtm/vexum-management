# AI人材常駐スタッフ進捗管理システム - 最終仕様書

## 1. システム概要

### 1.1 目的
クライアント先に常駐するAI人材スタッフのスケジュール・達成度を管理し、月次レポートを画像で自動生成してLINEで共有できるシステム。

### 1.2 システム構成
- **フロントエンド**: React + Vite + Tailwind CSS
- **バックエンド**: Google Apps Script (GAS)
- **データベース**: Google スプレッドシート
- **デプロイ**: フロントエンド (GitHub Pages/Vercel)、バックエンド (GAS Web App)

### 1.3 スプレッドシート情報
- **スプレッドシートID**: `1l2-K33r5qRsM4J_FwtivhiTsH6VhAhcvCzPcgIiHtyc`
- **URL**: https://docs.google.com/spreadsheets/d/1l2-K33r5qRsM4J_FwtivhiTsH6VhAhcvCzPcgIiHtyc/edit

### 1.4 GAS Web App API
- **URL**: https://script.google.com/macros/s/AKfycbypY-jY7lcvOqnRCvUDRlRp9zYYMW28POP2RcfDZIqop7HtLSe6KcpaGwiYGYL70td1/exec
- **アクセス**: 全員（認証不要）

---

## 2. 核心機能

1. **スタッフ管理** - スタッフ情報の登録・編集
2. **タスク・スケジュール管理** - タスクの期限・達成度を一覧で管理
3. **ミーティング記録** - 打ち合わせ内容・決定事項を記録、タスクと紐付け
4. **月次レポート自動生成** - 入力した情報から画像を自動生成、LINE送信用
5. **日報リンク管理** - Googleドキュメントの業務日報へ即座にアクセス

---

## 3. データモデル

### 3.1 Staff（スタッフ情報）
```javascript
{
  id: string,                    // UUID
  name: string,                  // 氏名
  currentClient: string,         // 現在の常駐先クライアント名
  assignmentStartDate: string,   // 常駐開始日
  assignmentEndDate: string,     // 常駐終了予定日
  contactEmail: string,          // メール
  contactPhone: string,          // 電話番号
  profileImage: string,          // プロフィール画像URL
  dailyReportUrl: string,        // 業務日報URL
  dailyReportLastUpdated: string,// 日報最終更新日
  createdAt: string,             // 作成日時
  updatedAt: string              // 更新日時
}
```

### 3.2 Task（タスク情報）
```javascript
{
  id: string,                    // UUID
  taskName: string,              // タスク名
  projectName: string,           // プロジェクト名
  clientName: string,            // クライアント名
  staffId: string,               // 担当スタッフID
  deadline: string,              // 期限日
  completionRate: number,        // 達成度 0-100
  status: string,                // not_started | in_progress | completed | delayed

  // 詳細情報
  overview: string,              // 概要
  achievements: string,          // 達成内容
  results: string,               // 成果
  technologies: string[],        // 使用技術
  notes: string,                 // 備考

  // ミーティングとの紐付け
  createdFromMeetingId: string,  // このタスクを決めたミーティングID
  reportToMeetingId: string,     // このタスクを報告するミーティングID

  createdAt: string,
  updatedAt: string
}
```

### 3.3 Meeting（ミーティング記録）
```javascript
{
  id: string,                    // UUID
  date: string,                  // ミーティング日時
  title: string,                 // ミーティング名
  clientName: string,            // クライアント名
  staffIds: string[],            // 参加スタッフID
  participants: string[],        // 参加者名（クライアント側含む）

  // ミーティング内容
  agenda: string,                // 議題
  decisions: [                   // 決定事項
    {
      id: string,
      content: string,
      taskId: string,            // タスク化した場合のタスクID
      isTaskCreated: boolean     // タスク化したか
    }
  ],
  actions: string,               // 次回までのアクション
  notes: string,                 // 備考

  // 次回予定
  nextMeetingDate: string,       // 次回ミーティング日時
  nextAgenda: string,            // 次回の議題

  createdAt: string,
  updatedAt: string
}
```

### 3.4 MonthlyReport（月次レポート）
```javascript
{
  id: string,                    // UUID
  clientName: string,            // クライアント名
  staffName: string,             // スタッフ名
  year: number,                  // 年
  month: number,                 // 月
  startDate: string,             // 期間開始日
  endDate: string,               // 期間終了日

  // 自動生成される内容（タスクから）
  tasks: [
    {
      projectName: string,
      overview: string,
      achievements: string,
      results: string,
      technologies: string[],
      completionRate: number
    }
  ],

  // 手動入力する内容
  comments: string,              // 所感・コメント
  issues: string,                // 今後の課題
  nextMonthPlan: string,         // 来月の方針
  upcomingTasks: [
    {
      taskName: string,
      details: string
    }
  ],

  generatedAt: string,           // レポート生成日時
  imageUrl: string,              // 生成した画像URL
  createdAt: string,
  updatedAt: string
}
```

---

## 4. API仕様

### 4.1 ベースURL
```
https://script.google.com/macros/s/AKfycbypY-jY7lcvOqnRCvUDRlRp9zYYMW28POP2RcfDZIqop7HtLSe6KcpaGwiYGYL70td1/exec
```

### 4.2 エンドポイント一覧

#### Staff API
- `GET ?action=getAllStaff` - 全スタッフ取得
- `GET ?action=getStaffById&id={id}` - IDでスタッフ取得
- `POST ?action=createStaff` - スタッフ作成
- `POST ?action=updateStaff` - スタッフ更新
- `POST ?action=deleteStaff` - スタッフ削除

#### Task API
- `GET ?action=getAllTasks` - 全タスク取得
- `GET ?action=getTaskById&id={id}` - IDでタスク取得
- `POST ?action=createTask` - タスク作成
- `POST ?action=updateTask` - タスク更新
- `POST ?action=deleteTask` - タスク削除

#### Meeting API
- `GET ?action=getAllMeetings` - 全ミーティング取得
- `GET ?action=getMeetingById&id={id}` - IDでミーティング取得
- `POST ?action=createMeeting` - ミーティング作成
- `POST ?action=updateMeeting` - ミーティング更新
- `POST ?action=deleteMeeting` - ミーティング削除

#### MonthlyReport API
- `GET ?action=getAllMonthlyReports` - 全月次レポート取得
- `GET ?action=getMonthlyReportById&id={id}` - IDで月次レポート取得
- `POST ?action=createMonthlyReport` - 月次レポート作成
- `POST ?action=updateMonthlyReport` - 月次レポート更新
- `POST ?action=deleteMonthlyReport` - 月次レポート削除

#### その他
- `GET ?action=initializeAllSheets` - すべてのシートを初期化

### 4.3 レスポンス形式

**成功時:**
```json
{
  "success": true,
  "data": { ... }
}
```

**エラー時:**
```json
{
  "success": false,
  "message": "エラーメッセージ"
}
```

---

## 5. フロントエンド実装

### 5.1 技術スタック
- **フレームワーク**: React 18 + Vite
- **スタイリング**: Tailwind CSS
- **UIコンポーネント**: shadcn/ui
- **状態管理**: React Context (LocalStorageと併用)
- **アイコン**: Lucide React
- **日付処理**: date-fns
- **画像生成**: html2canvas

### 5.2 APIクライアント

フロントエンドでは `api-client.js` を使用してAPIと通信:

```javascript
import ProgressManagementAPI from './api-client.js';

const api = new ProgressManagementAPI(
  'https://script.google.com/macros/s/AKfycbypY-jY7lcvOqnRCvUDRlRp9zYYMW28POP2RcfDZIqop7HtLSe6KcpaGwiYGYL70td1/exec'
);

// スタッフを取得
const staff = await api.getAllStaff();

// タスクを作成
const newTask = await api.createTask({
  taskName: '要件定義',
  projectName: 'プロジェクトX',
  clientName: 'クライアントA',
  staffId: 'uuid-xxx',
  deadline: '2025-10-31',
  completionRate: 0,
  status: 'not_started'
});
```

### 5.3 主要画面

1. **スケジュール一覧画面** - タスクの進捗を一覧表示、フィルター・ソート機能
2. **タスク詳細・編集画面** - タスク情報の編集、達成度更新
3. **ミーティング記録画面** - ミーティング内容の記録、決定事項からタスク作成
4. **月次レポート作成画面** - 自動データ取得 + 手動入力、画像生成
5. **スタッフ管理画面** - スタッフ情報の管理

---

## 6. デプロイ情報

### 6.1 バックエンド (GAS)
- **デプロイ済み**: ✅
- **Web App URL**: https://script.google.com/macros/s/AKfycbypY-jY7lcvOqnRCvUDRlRp9zYYMW28POP2RcfDZIqop7HtLSe6KcpaGwiYGYL70td1/exec
- **GASエディタ**: https://script.google.com/d/1L5eoAIjkrqIHK0lvr2BqbC_JGYvm6a0hTHGH4jgqcXR_OmDa6_p7Gocb/edit
- **アクセス設定**: 全員（認証不要）

### 6.2 フロントエンド
- **デプロイ先**: GitHub Pages または Vercel
- **ビルドコマンド**: `npm run build`
- **公開ディレクトリ**: `dist`

---

## 7. ファイル構成

```
進捗管理/
├── gas-backend/              # GASバックエンド
│   ├── Code.gs              # GASメインコード
│   ├── appsscript.json      # GAS設定
│   ├── api-client.js        # フロントエンド用APIクライアント
│   ├── README.md            # APIドキュメント
│   ├── API_URL.txt          # Web App URL
│   └── .claspignore         # clasp設定
│
├── progress-management-system/  # フロントエンド (React)
│   ├── src/
│   ├── public/
│   ├── package.json
│   └── vite.config.js
│
└── 進捗管理システム_最終仕様書.md  # この仕様書
```

---

## 8. 開発フェーズ

### Phase 1: バックエンド構築 ✅
- GAS API実装
- スプレッドシート初期化
- Web Appデプロイ

### Phase 2: フロントエンド基本機能（進行中）
- スタッフ管理CRUD
- タスク管理CRUD
- APIとの接続

### Phase 3: ミーティング記録機能
- ミーティング記録CRUD
- タスクとの紐付け
- 決定事項からタスク自動作成

### Phase 4: 月次レポート機能
- 月次レポート作成画面
- 自動データ取得
- 画像生成・ダウンロード

### Phase 5: UI改善・最適化
- かっこいいデザイン適用
- アニメーション追加
- レスポンシブ対応

---

## 9. 今後の作業

1. **フロントエンド開発**
   - React プロジェクトのセットアップ
   - `api-client.js` の統合
   - 画面実装

2. **テスト**
   - API動作確認
   - データフロー確認
   - エッジケース対応

3. **デプロイ**
   - フロントエンドのビルド
   - GitHub Pages/Vercel へのデプロイ

---

## 10. 参考資料

### GASバックエンド
- GASエディタ: https://script.google.com/d/1L5eoAIjkrqIHK0lvr2BqbC_JGYvm6a0hTHGH4jgqcXR_OmDa6_p7Gocb/edit
- スプレッドシート: https://docs.google.com/spreadsheets/d/1l2-K33r5qRsM4J_FwtivhiTsH6VhAhcvCzPcgIiHtyc/edit
- APIドキュメント: `gas-backend/README.md`

### フロントエンド
- React: https://react.dev/
- Vite: https://vitejs.dev/
- Tailwind CSS: https://tailwindcss.com/
- shadcn/ui: https://ui.shadcn.com/

---

**更新日**: 2025-10-03
**バージョン**: 1.0
**ステータス**: バックエンド完成、フロントエンド開発中
